---
title: ä¾§è¾¹æ æ”¶ç¼©çš„å…­ç§æ–¹æ¡ˆ
---



ä¾§è¾¹æ æ”¶ç¼©å¯ä»¥æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ¡ˆ

| æ–¹æ¡ˆ                 | è§¦å‘ Reflow? | è§¦å‘ Repaint? | æ˜¯å¦å½±å“å¸ƒå±€ | ç¡¬ä»¶åŠ é€Ÿ | é€‚ç”¨åœºæ™¯           |
| -------------------- | ------------ | ------------- | ------------ | -------- | ------------------ |
| `width + transition` | âœ… æ˜¯         | âœ… æ˜¯          | âœ… å½±å“       | âŒ å¦     | å®½åº¦å˜åŒ–ï¼ˆç®€å•ï¼‰   |
| `@keyframes width`   | âœ… æ˜¯         | âœ… æ˜¯          | âœ… å½±å“       | âŒ å¦     | å¤æ‚ `width` åŠ¨ç”»  |
| `JS é€æ­¥ width`      | âœ… æ˜¯         | âœ… æ˜¯          | âœ… å½±å“       | âŒ å¦     | ç»†ç²’åº¦æŽ§åˆ¶         |
| `scaleX()`           | âŒ å¦         | âœ… æ˜¯          | âŒ ä¸å½±å“     | âœ… æ˜¯     | **æœ€ä½³ï¼Œé€‚åˆæ”¶ç¼©** |
| `translateX()`       | âŒ å¦         | âœ… æ˜¯          | âŒ ä¸å½±å“     | âœ… æ˜¯     | **æœ€ä½³ï¼Œé€‚åˆéšè—** |
| left: -200px         | âœ… è§¦å‘       |               |              | âŒ å¦     |                    |

å…³äºŽæ€§èƒ½å¯ä»¥é€šè¿‡Performance Monitoré¢æ¿æ¥ç›‘æŽ§ç½‘é¡µæ€§èƒ½



## **æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ `animation` è¿‡æ¸¡ `width`**

```
css


å¤åˆ¶ç¼–è¾‘
.sidebar {
  width: 200px;
  transition: width 0.3s ease-in-out;
}

.sidebar.collapsed {
  width: 50px;
}
```

âœ… **ä¼˜ç‚¹**ï¼š

- ä½¿ç”¨ `transition`ï¼Œæµè§ˆå™¨å¯ä»¥ä¼˜åŒ–åŠ¨ç”»ï¼Œæ€§èƒ½è¾ƒå¥½ã€‚
- ä»£ç ç®€æ´ï¼Œæ˜“äºŽç»´æŠ¤ã€‚
- `transition` ä»…åœ¨ `width` å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼Œä¸ä¼šæŒç»­æ‰§è¡Œã€‚

âŒ **ç¼ºç‚¹**ï¼š

- åªé€‚ç”¨äºŽå•ä¸€æ–¹å‘çš„è¿‡æ¸¡ï¼ˆä¸èƒ½æŽ§åˆ¶æ›´å¤æ‚çš„åŠ¨ç”»ï¼‰ã€‚

------

## **æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ `@keyframes`**

```
css


å¤åˆ¶ç¼–è¾‘
@keyframes collapse {
  from {
    width: 200px;
  }
  to {
    width: 50px;
  }
}

@keyframes expand {
  from {
    width: 50px;
  }
  to {
    width: 200px;
  }
}

.sidebar {
  width: 200px;
}

.sidebar.collapsed {
  animation: collapse 0.3s forwards;
}

.sidebar.expanded {
  animation: expand 0.3s forwards;
}
```

âœ… **ä¼˜ç‚¹**ï¼š

- `@keyframes` å…è®¸æ›´å¤æ‚çš„åŠ¨ç”»ï¼ˆæ¯”å¦‚éžçº¿æ€§å˜åŒ–ã€ç»“åˆ `opacity`ï¼‰ã€‚
- å¯ä»¥æ›´è‡ªç”±åœ°æŽ§åˆ¶åŠ¨ç”»çš„ `timing function`ï¼Œæ”¯æŒ `steps()` ç­‰ç»†ç²’åº¦æŽ§åˆ¶ã€‚

âŒ **ç¼ºç‚¹**ï¼š

- éœ€è¦ `animation` è§¦å‘ï¼Œæ¯æ¬¡çŠ¶æ€å˜åŒ–éƒ½ä¼šæ‰§è¡ŒåŠ¨ç”»ï¼Œå¯èƒ½å¸¦æ¥é¢å¤–çš„æ€§èƒ½æ¶ˆè€—ã€‚
- ä»£ç ç¨æ˜¾å†—ä½™ï¼Œä¸å¦‚ `transition` ç›´è§‚ã€‚

------

## **æ–¹æ¡ˆ 3ï¼šä½¿ç”¨ `style.width` é€æ­¥è°ƒæ•´**

```
tsx


å¤åˆ¶ç¼–è¾‘
const [width, setWidth] = useState(200);

const toggleSidebar = () => {
  let targetWidth = width === 200 ? 50 : 200;
  let step = width > targetWidth ? -5 : 5;

  let timer = setInterval(() => {
    setWidth(prev => {
      let newWidth = prev + step;
      if ((step > 0 && newWidth >= targetWidth) || (step < 0 && newWidth <= targetWidth)) {
        clearInterval(timer);
        return targetWidth;
      }
      return newWidth;
    });
  }, 10);
};
```

âœ… **ä¼˜ç‚¹**ï¼š

- å¯ä»¥æ‰‹åŠ¨æŽ§åˆ¶ `width` çš„æ¯ä¸€æ­¥å˜åŒ–ï¼Œå®žçŽ°æ›´å¤æ‚çš„äº¤äº’æ•ˆæžœã€‚
- å¯ä»¥ä¸Ž `requestAnimationFrame` ç»“åˆä¼˜åŒ–æ€§èƒ½ã€‚

âŒ **ç¼ºç‚¹**ï¼š

- æ‰‹åŠ¨è®¡ç®— `width` å˜åŒ–ï¼Œä»£ç å¤æ‚åº¦è¾ƒé«˜ã€‚
- ä¸å¦‚ CSS æ–¹æ¡ˆé«˜æ•ˆï¼Œå¯èƒ½å½±å“æ€§èƒ½ã€‚

---

## **âœ… æ–¹æ¡ˆ 4ï¼šä½¿ç”¨ `transform`ï¼ˆæŽ¨èï¼‰**

```
css


å¤åˆ¶ç¼–è¾‘
.sidebar {
  width: 200px; /* ä¾§è¾¹æ çš„åŽŸå§‹å®½åº¦ */
  transform-origin: left; /* å˜æ¢åŽŸç‚¹åœ¨å·¦ä¾§ */
  transform: scaleX(1);
  transition: transform 0.3s ease-in-out;
}

.sidebar.collapsed {
  transform: scaleX(0);
}
```

### **ðŸŽ¯ æ–¹æ¡ˆåŽŸç†**

- `scaleX(1)` è¡¨ç¤ºæ­£å¸¸å¤§å°ï¼Œ`scaleX(0)` è®©ä¾§è¾¹æ æ°´å¹³æ”¶ç¼©è‡³ 0ï¼Œä¸æ”¹å˜å…¶ `width`ã€‚
- `transform` **ä¸ä¼šå½±å“å¸ƒå±€**ï¼Œæ¯” `width` å˜åŒ–æ€§èƒ½æ›´å¥½ã€‚
- ç»“åˆ `transform-origin: left` ç¡®ä¿æ”¶ç¼©æ–¹å‘æ­£ç¡®ã€‚

âœ… **ä¼˜ç‚¹**ï¼š

- **é«˜æ€§èƒ½ï¼Œåˆ©ç”¨ GPU ç¡¬ä»¶åŠ é€Ÿï¼Œä¸å¡é¡¿ã€‚**
- **ä¸ä¼šè§¦å‘ reflowï¼ˆå›žæµï¼‰ï¼Œä»…è§¦å‘ compositingï¼ˆåˆæˆå±‚ï¼‰ä¼˜åŒ–ã€‚**
- **ä¸ä¼šå½±å“ç›¸é‚»å…ƒç´ çš„å¸ƒå±€**ï¼ˆä¸åƒ `width` ä¼šå½±å“ï¼‰ã€‚

âŒ **ç¼ºç‚¹**ï¼š

- **æ— æ³•å½±å“ `overflow: hidden` é‡Œçš„å†…å®¹**ï¼Œå¦‚æžœ `sidebar` å†…éƒ¨æœ‰ `absolute` å¸ƒå±€å…ƒç´ ï¼Œå¯èƒ½ä»ç„¶ä¼šæ˜¾ç¤ºã€‚
- **å¯èƒ½å½±å“å†…éƒ¨å…ƒç´ çš„åŠ¨ç”»**ï¼ˆ`scaleX(0)` ä¼šç¼©æ”¾å†…éƒ¨æ‰€æœ‰å†…å®¹ï¼‰ã€‚

------

## **âœ… æ–¹æ¡ˆ 5ï¼šä½¿ç”¨ `translateX()`**

```
css


å¤åˆ¶ç¼–è¾‘
.sidebar {
  width: 200px;
  transform: translateX(0);
  transition: transform 0.3s ease-in-out;
}

.sidebar.collapsed {
  transform: translateX(-100%);
}
```

### **ðŸŽ¯ æ–¹æ¡ˆåŽŸç†**

- `translateX(0)` è¡¨ç¤ºä¾§è¾¹æ åœ¨åŽŸä½ï¼Œ`translateX(-100%)` è®©å…¶å®Œå…¨ç§»åŠ¨åˆ°å·¦ä¾§ **(éšè—)**
- é€‚ç”¨äºŽä¾§è¾¹æ **å®Œå…¨éšè—**çš„æƒ…å†µï¼Œè€Œéžç¼©å°å®½åº¦ã€‚

âœ… **ä¼˜ç‚¹**ï¼š

- **æ€§èƒ½æžä½³ï¼ˆGPU åŠ é€Ÿï¼‰ï¼Œä¸ä¼šå½±å“ DOM ç»“æž„ã€‚**
- **ä¸ä¼šå½±å“å†…éƒ¨å…ƒç´ çš„ç¼©æ”¾ã€‚**

âŒ **ç¼ºç‚¹**ï¼š

- **åªèƒ½ç”¨äºŽéšè—/æ˜¾ç¤ºï¼Œä¸èƒ½ç”¨äºŽå®½åº¦ç¼©æ”¾**ã€‚
- **å¯èƒ½éœ€è¦é¢å¤–çš„ `overflow: hidden` å¤„ç†æ»šåŠ¨æ¡é—®é¢˜**ã€‚



## æ–¹æ¡ˆ6ï¼šä½¿ç”¨å®šä½å’Œleftå±žæ€§

