---
title: tree-shaking
---

### tree-shaking

https://juejin.cn/post/7004297344300777502

Tree-shaking只支持ESM的引入方式，不支持 Common JS 的引入方式。

- ESM: export + import
- Common JS: module.exports + require

```js
import { add } from 'lodash'	// 不支持
import { add } from 'lodash-es' // 支持
```

原因是lodash是module.exports 导出的



<img src="/Users/cheng/Library/Application Support/typora-user-images/image-20220810100605663.png" alt="image-20220810100605663" style="zoom:70%;" />



使用lodash之前的大小

<img src="https://minimax-1256590847.cos.ap-shanghai.myqcloud.com/img/image-20231020164837256.png" alt="image-20231020164837256" style="zoom:67%;" />

引入lodash并使用后

<img src="https://minimax-1256590847.cos.ap-shanghai.myqcloud.com/img/image-20231020165449685.png" alt="image-20231020165449685" style="zoom:67%;" />

而使用lodash-es

<img src="https://minimax-1256590847.cos.ap-shanghai.myqcloud.com/img/image-20231020165625226.png" alt="image-20231020165625226" style="zoom:67%;" />