å°ç¨‹åºçš„ç»„ä»¶é€šä¿¡ç±»ä¼¼äºVue

ğŸ‘‰https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/events.html

### å‘ä¸‹ä¼ é€’

propertiesä¼ é€’

## è‡ªå®šä¹‰äº‹ä»¶triggerEvent

triggerEventå¯ç”¨äºå‘ä¸Šé€šä¿¡

å­ç»„ä»¶ä¸­bindç»‘å®šäº‹ä»¶ï¼Œé€šè¿‡`this.triggerEvent('myevent', myEventDetail, myEventOption)`è§¦å‘äº‹ä»¶

åœ¨çˆ¶ç»„ä»¶ä¸­`bind: myevent`ç›‘å¬äº‹ä»¶

å…·ä½“å¯çœ‹[å®˜æ–¹æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/events.html)

```js
// ç»„ä»¶ my-component.js
Component({
  methods: {
    onTap: function(){
      this.triggerEvent('customevent', {}) // åªä¼šè§¦å‘ pageEventListener2
      this.triggerEvent('customevent', {}, { bubbles: true }) // ä¼šä¾æ¬¡è§¦å‘ pageEventListener2 ã€ pageEventListener1
      this.triggerEvent('customevent', {}, { bubbles: true, composed: true }) // ä¼šä¾æ¬¡è§¦å‘ pageEventListener2 ã€ anotherEventListener ã€ pageEventListener1
    }
  }
})
```





å°ç¨‹åºä¸­çš„äº‹ä»¶å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªåä¸º `detail` çš„å±æ€§ï¼Œå®ƒå’Œ `CustomEvent` ä¸­çš„ `detail` å±æ€§ç±»ä¼¼ã€‚å½“ä¸€ä¸ªå°ç¨‹åºç»„ä»¶ä¸­è§¦å‘äº†ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œ`detail` å±æ€§å¯ä»¥ç”¨æ¥ä¼ é€’ä¸€äº›è‡ªå®šä¹‰çš„æ•°æ®ï¼Œä¾›äº‹ä»¶å¤„ç†å‡½æ•°ä½¿ç”¨ã€‚

ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬åœ¨ä¸€ä¸ªå°ç¨‹åºé¡µé¢ä¸­åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ `<custom-component>`ï¼Œå¹¶åœ¨è¿™ä¸ªç»„ä»¶ä¸­è§¦å‘äº†ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ `<my-event>`ï¼š

```html
<custom-component bindmyevent="onMyEvent" />
```

æˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢çš„é€»è¾‘éƒ¨åˆ†ä¸­å®ç°ä¸€ä¸ªåä¸º `onMyEvent` çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå¹¶åœ¨è¿™ä¸ªå¤„ç†å‡½æ•°ä¸­è·å–äº‹ä»¶çš„ `detail` å±æ€§ï¼š

```js
Page({
  onMyEvent: function(e) {
    console.log(e.detail);
  }
})
```

æ­¤æ—¶ï¼Œå½“ç”¨æˆ·åœ¨ç»„ä»¶ä¸­è§¦å‘äº† `<my-event>` è‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œä¼šæ‰§è¡Œ `onMyEvent` å‡½æ•°ï¼Œå¹¶è¾“å‡ºäº‹ä»¶å¯¹è±¡ `e` çš„ `detail` å±æ€§ã€‚è¿™ä¸ªå±æ€§å¯ä»¥ç”¨æ¥æºå¸¦ä¸€äº›è‡ªå®šä¹‰æ•°æ®ï¼Œä¾‹å¦‚ï¼š

```js
const myEventDetail = {
  message: "Hello, world!"
};

const myEventOption = {}; // è§¦å‘äº‹ä»¶çš„é€‰é¡¹

this.triggerEvent("myevent", myEventDetail, myEventOption);
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº† `triggerEvent()` æ–¹æ³•æ¥è§¦å‘ `<my-event>` è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶å°† `myEventDetail` å˜é‡ä¸­å­˜å‚¨çš„æ•°æ®ä¼ é€’ç»™äº‹ä»¶çš„ `detail` å±æ€§ã€‚åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¿é—®äº‹ä»¶å¯¹è±¡çš„ `detail` å±æ€§æ¥è·å–è¿™äº›è‡ªå®šä¹‰æ•°æ®ã€‚
