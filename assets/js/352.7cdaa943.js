(window.webpackJsonp=window.webpackJsonp||[]).push([[352],{640:function(t,e,v){"use strict";v.r(e);var _=v(8),a=Object(_.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"requestanimationframe和requestidlecallback以及settimeout"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#requestanimationframe和requestidlecallback以及settimeout"}},[t._v("#")]),t._v(" requestAnimationFrame和requestIdleCallback以及setTimeout")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("特性")]),t._v(" "),e("th",[t._v("requestAnimationFrame")]),t._v(" "),e("th",[t._v("requestIdleCallback")]),t._v(" "),e("th",[t._v("setTimeout")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("执行时机")]),t._v(" "),e("td",[t._v("下一帧渲染前（与绘制同步）")]),t._v(" "),e("td",[t._v("浏览器空闲时（或超时后）")]),t._v(" "),e("td",[t._v("指定延迟后（宏任务）")])]),t._v(" "),e("tr",[e("td",[t._v("用途")]),t._v(" "),e("td",[t._v("动画、读取稳定布局（getBoundingClientRect）")]),t._v(" "),e("td",[t._v("后台/闲时任务，低优先级工作")]),t._v(" "),e("td",[t._v("任意延时/回退/防抖")])]),t._v(" "),e("tr",[e("td",[t._v("精准性")]),t._v(" "),e("td",[t._v("高（与帧同步）")]),t._v(" "),e("td",[t._v("低（由浏览器决定）")]),t._v(" "),e("td",[t._v("取决于浏览器/标签页可见性")])]),t._v(" "),e("tr",[e("td",[t._v("阻塞渲染？")]),t._v(" "),e("td",[t._v("否（在绘制前执行短任务可影响帧率）")]),t._v(" "),e("td",[t._v("否（空闲时执行）")]),t._v(" "),e("td",[t._v("可能（如果回调执行耗时）")])]),t._v(" "),e("tr",[e("td",[t._v("取消方法")]),t._v(" "),e("td",[t._v("cancelAnimationFrame(id)")]),t._v(" "),e("td",[t._v("cancelIdleCallback(id)")]),t._v(" "),e("td",[t._v("clearTimeout(id)")])]),t._v(" "),e("tr",[e("td",[t._v("浏览器支持")]),t._v(" "),e("td",[t._v("广泛")]),t._v(" "),e("td",[t._v("支持不均（Safari 需 polyfill）")]),t._v(" "),e("td",[t._v("全浏览器支持")])])])]),t._v(" "),e("h2",{attrs:{id:"requestanimationframe"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#requestanimationframe"}},[t._v("#")]),t._v(" requestAnimationFrame")]),t._v(" "),e("p",[t._v("场景：帧动画、平滑过渡、需要读取元素最新布局（"),e("code",[t._v("getBoundingClientRect()")]),t._v("）并基于此做渲染决策。")]),t._v(" "),e("h2",{attrs:{id:"requestidlecallback"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#requestidlecallback"}},[t._v("#")]),t._v(" requestIdleCallback")]),t._v(" "),e("ul",[e("li",[t._v("场景：预加载数据、统计、日志上报、非关键 DOM 检测（比如延迟展示不影响 UX 的 tooltip）、大批量 DOM 操作可拆成多段等。")]),t._v(" "),e("li",[t._v("优点：浏览器忙时不会运行，能避免影响主线程性能；支持 timeout 作为兜底。")]),t._v(" "),e("li",[t._v("缺点：跨浏览器支持不一（Safari 不支持），回调执行时间不可保证（可能被无限延后直到浏览器空闲）。")])]),t._v(" "),e("h2",{attrs:{id:"settimeout"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#settimeout"}},[t._v("#")]),t._v(" setTimeout")]),t._v(" "),e("p",[t._v("场景：简单的防抖（debounce）、超时兜底、兼容环境下做 fallback、在页不可见时仍需要按时执行（注意有浏览器 throttle）。")]),t._v(" "),e("p",[t._v("优点：简单、跨浏览器、可设任意延时。")]),t._v(" "),e("p",[t._v("缺点：无法与渲染同步、精度受限（最小延时规则）、当页面不可见/后台标签页会被节流（可能 1000ms+）。")])])}),[],!1,null,null,null);e.default=a.exports}}]);