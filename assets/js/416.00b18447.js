(window.webpackJsonp=window.webpackJsonp||[]).push([[416],{704:function(s,a,t){"use strict";t.r(a);var e=t(8),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"iptables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iptables"}},[s._v("#")]),s._v(" iptables")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" iptables "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"centos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos"}},[s._v("#")]),s._v(" Centos")]),s._v(" "),a("h3",{attrs:{id:"firewalld和firewall-cmd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#firewalld和firewall-cmd"}},[s._v("#")]),s._v(" firewalld和firewall-cmd")]),s._v(" "),a("p",[a("code",[s._v("firewall-cmd")]),s._v(" 和 "),a("code",[s._v("firewalld")]),s._v(" 是 CentOS/RHEL 系统中用于配置和管理防火墙的两个关联工具。")]),s._v(" "),a("p",[a("code",[s._v("firewalld")]),s._v(" 是一个动态的防火墙管理器，用于配置 iptables 规则。它提供了一个 D-Bus 接口和一个命令行接口，可以通过这两个接口进行防火墙规则的配置和管理。"),a("code",[s._v("firewalld")]),s._v(" 允许用户在运行时动态地更改防火墙规则，而无需重启防火墙服务。")]),s._v(" "),a("p",[a("code",[s._v("firewall-cmd")]),s._v(" 是用于与 "),a("code",[s._v("firewalld")]),s._v(" 交互的命令行工具。它提供了一种简化的方式来配置 "),a("code",[s._v("firewalld")]),s._v("，并执行防火墙操作。"),a("code",[s._v("firewall-cmd")]),s._v(" 命令通过调用 "),a("code",[s._v("firewalld")]),s._v(" 的 D-Bus 接口来实现防火墙的配置。")]),s._v(" "),a("p",[s._v("主要命令和用法：")]),s._v(" "),a("ul",[a("li",[a("strong",[a("code",[s._v("--add-service")]),s._v("：")]),s._v(" 添加一个服务。")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("--add-port")]),s._v("：")]),s._v(" 添加一个端口。")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("--list-all")]),s._v("：")]),s._v(" 列出当前防火墙规则的详细信息。")]),s._v(" "),a("li",[a("strong",[a("code",[s._v("--reload")]),s._v("：")]),s._v(" 重新加载防火墙规则。")])]),s._v(" "),a("blockquote",[a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("firewall-cmd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--zone")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--permanent")]),s._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启端口")]),s._v("\nfirewall-cmd --list-ports\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看开放的端口")]),s._v("\nfirewall-cmd --query-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),s._v("/tcp\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看端口是否开启")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("lsof")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i:8888")]),s._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看端口占用")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-tunlp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),s._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看指定端口的进程情况")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("p",[s._v("最后是怎么解决的呢...")]),s._v(" "),a("p",[a("code",[s._v("reboot")]),s._v("重启下服务器就好了")]),s._v(" "),a("h4",{attrs:{id:"开放端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开放端口"}},[s._v("#")]),s._v(" 开放端口")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看端口开放情况")]),s._v("\nfirewall-cmd --list-ports\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开放端口")]),s._v("\nfirewall-cmd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--zone")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19132")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--permanent")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 命令含义：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# –zone #作用域")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# –add-port=80/tcp #添加端口，格式为：端口/通讯协议")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# –permanent #永久生效，没有此参数重启后失效")]),s._v("\n\nfirewall-cmd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--reload")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#重启firewall")]),s._v("\nsystemctl stop firewalld.service "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#停止firewall")]),s._v("\nsystemctl disable firewalld.service "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#禁止firewall开机启动")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h4",{attrs:{id:"端口开放失败问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#端口开放失败问题"}},[s._v("#")]),s._v(" 端口开放失败问题")]),s._v(" "),a("ul",[a("li",[s._v("腾讯云安全组已开启端口,但是服务器内部"),a("code",[s._v("firewall-cmd --list-ports")]),s._v("查看不到")])]),s._v(" "),a("h4",{attrs:{id:"firewall-cmd查看端口及操作端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#firewall-cmd查看端口及操作端口"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"https://blog.csdn.net/y534560449/article/details/65629697",target:"_blank",rel:"noopener noreferrer"}},[s._v("firewall-cmd查看端口及操作端口"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/cded5a53cb5f",target:"_blank",rel:"noopener noreferrer"}},[s._v("附宝塔面板端口修改教程"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"ubuntu-ufw"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-ufw"}},[s._v("#")]),s._v(" Ubuntu ufw")]),s._v(" "),a("p",[s._v("ufw操作防火墙https://zhuanlan.zhihu.com/p/98880088")]),s._v(" "),a("h4",{attrs:{id:"查看防火墙"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看防火墙"}},[s._v("#")]),s._v(" 查看防火墙")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw status\nStatus: inactive "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#inactive表示关闭")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"开启-关闭防火墙"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启-关闭防火墙"}},[s._v("#")]),s._v(" 开启/关闭防火墙")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw disable\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"开放端口-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开放端口-2"}},[s._v("#")]),s._v(" 开放端口")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw allow "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#port端口号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw allow "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/udp "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开放udp 80端口")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ufw allow open port on ipv4 only")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h4",{attrs:{id:"禁用端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#禁用端口"}},[s._v("#")]),s._v(" 禁用端口")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw deny "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#禁用端口")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"删除规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除规则"}},[s._v("#")]),s._v(" 删除规则")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw delete allow "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" ufw delete deny "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19132")]),s._v("/udp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"ufw禁用ipv6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ufw禁用ipv6"}},[s._v("#")]),s._v(" ufw禁用ipv6")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/default/ufw\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("将"),a("code",[s._v("IPV6=yes")]),s._v("改成"),a("code",[s._v("IPV6=no")]),s._v("，然后重启防火墙。")]),s._v(" "),a("h4",{attrs:{id:"ufw-reset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ufw-reset"}},[s._v("#")]),s._v(" ufw reset")]),s._v(" "),a("p",[a("code",[s._v("ufw reset")]),s._v(" 是一个用于重置 UFW 防火墙设置和规则到默认状态的命令。执行该命令会清除现有的防火墙规则和设置，并重置为默认值，即开启所有入站和出站连接。")])])}),[],!1,null,null,null);a.default=r.exports}}]);