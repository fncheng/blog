(window.webpackJsonp=window.webpackJsonp||[]).push([[264],{552:function(e,t,a){"use strict";a.r(t);var o=a(8),s=Object(o.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("ul",[t("li",[t("a",{attrs:{href:"#cookie"}},[e._v("cookie")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#web-storage-api"}},[e._v("Web Storage API")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#token"}},[e._v("token")])]),e._v(" "),t("li",[t("a",{attrs:{href:"#cookie-localstorage-%E4%B8%8E-sessionstorage-%E7%9A%84%E5%8C%BA%E5%88%AB"}},[e._v("Cookie, LocalStorage 与 SessionStorage 的区别")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"#localstorage-%E5%92%8C-sessionstorage"}},[e._v("localStorage 和 sessionStorage")])])])])]),e._v(" "),t("h2",{attrs:{id:"cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[e._v("#")]),e._v(" cookie")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://juejin.im/post/5aa783b76fb9a028d663d70a#heading-1",target:"_blank",rel:"noopener noreferrer"}},[e._v("cookie 和 session 的区别"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("strong",[e._v("1.什么是 cookie")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies",target:"_blank",rel:"noopener noreferrer"}},[e._v("mdn"),t("OutboundLink")],1),e._v("关于 cookie 的解释")]),e._v(" "),t("blockquote",[t("p",[e._v("HTTP Cookie（也叫 Web Cookie 或浏览器 Cookie）是服务器发送到用户浏览器并保存在本地的一小块数据,它会在浏览器下次向同一服务器再次发起请求时被携带并发送到服务器上。")]),e._v(" "),t("p",[e._v("通常，它用于告知服务端两个请求是否来自同一浏览器，如保持用户的登录状态。Cookie 使基于"),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview#HTTP_is_stateless_but_not_sessionless",target:"_blank",rel:"noopener noreferrer"}},[e._v("无状态"),t("OutboundLink")],1),e._v("的 HTTP 协议记录稳定的状态信息成为了可能。")])]),e._v(" "),t("p",[e._v("Cookie 主要用于以下三个方面：")]),e._v(" "),t("ul",[t("li",[e._v("会话状态管理（如用户登录状态、购物车、游戏分数或其它需要记录的信息）")]),e._v(" "),t("li",[e._v("个性化设置（如用户自定义设置、主题等）")]),e._v(" "),t("li",[e._v("浏览器行为跟踪（如跟踪分析用户行为等）")])]),e._v(" "),t("p",[e._v("Cookie 技术通过请求和响应报文中写入 Cookie 信息来控制客户端的状态。")]),e._v(" "),t("h3",{attrs:{id:"cookie有哪些属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie有哪些属性"}},[e._v("#")]),e._v(" Cookie有哪些属性？")]),e._v(" "),t("p",[e._v("在Application/Cookies里面我们可以看到Cookie有以下属性")]),e._v(" "),t("p",[e._v("![](/Users/cheng/Library/Application Support/typora-user-images/image-20210413104124314.png)")]),e._v(" "),t("ul",[t("li",[e._v("Name")]),e._v(" "),t("li",[e._v("Value")]),e._v(" "),t("li",[e._v("Domain")]),e._v(" "),t("li",[e._v("Path")]),e._v(" "),t("li",[e._v("Expires/Max-Age")]),e._v(" "),t("li",[e._v("Size")]),e._v(" "),t("li",[e._v("HTTP")]),e._v(" "),t("li",[e._v("Secure")]),e._v(" "),t("li",[e._v("SameSite")])]),e._v(" "),t("p",[t("strong",[t("a",{attrs:{href:"https://bugszhou.abuen.com/cookie/chapter1/properties.html#%E5%B1%9E%E6%80%A7%E8%AF%A6%E8%A7%A3",target:"_blank",rel:"noopener noreferrer"}},[e._v("Cookie属性详解"),t("OutboundLink")],1)])]),e._v(" "),t("h4",{attrs:{id:"expires-max-age"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expires-max-age"}},[e._v("#")]),e._v(" Expires/Max-Age")]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[e._v("// Set-Cookie: Name = value;\texpires = 时间 ;  path = 路径 ;  HTTP\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Set-Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("ki1e_2132_connect_is_bind=1; expires=Wed, 13-Apr-2022 02:35:07 GMT; path=/; httponly")])]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("h4",{attrs:{id:"domain属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#domain属性"}},[e._v("#")]),e._v(" Domain属性")]),e._v(" "),t("blockquote",[t("p",[t("code",[e._v("Domain")]),e._v(" 指定了哪些主机可以接受 Cookie。如果不指定，默认为 "),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Glossary/Origin",target:"_blank",rel:"noopener noreferrer"}},[e._v("origin"),t("OutboundLink")],1),e._v("，"),t("strong",[e._v("不包含子域名")]),e._v("。如果指定了"),t("code",[e._v("Domain")]),e._v("，则一般包含子域名。因此，指定 "),t("code",[e._v("Domain")]),e._v(" 比省略它的限制要少。但是，当子域需要共享有关用户的信息时，这可能会有所帮助。")])]),e._v(" "),t("p",[e._v("例如，如果设置 "),t("code",[e._v("Domain=mozilla.org")]),e._v("，则 Cookie 也包含在子域名中（如"),t("code",[e._v("developer.mozilla.org")]),e._v("）。")]),e._v(" "),t("h4",{attrs:{id:"path属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#path属性"}},[e._v("#")]),e._v(" Path属性")]),e._v(" "),t("blockquote",[t("p",[t("code",[e._v("Path")]),e._v(" 标识指定了主机下的哪些路径可以接受 Cookie（该 URL 路径必须存在于请求 URL 中）。以字符 "),t("code",[e._v("%x2F")]),e._v(' ("/") 作为路径分隔符，子路径也会被匹配。')])]),e._v(" "),t("p",[e._v("例如，设置 "),t("code",[e._v("Path=/docs")]),e._v("，则以下地址都会匹配：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("/docs")])]),e._v(" "),t("li",[t("code",[e._v("/docs/Web/")])]),e._v(" "),t("li",[t("code",[e._v("/docs/Web/HTTP")])])]),e._v(" "),t("h4",{attrs:{id:"http"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http"}},[e._v("#")]),e._v(" HTTP")]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[e._v("// HTTP代表的是Cookie的httponly属性。其值为boolean类型有两种：true/false。如果设置为true，则无法通过使用 document.cookie 来获取这条Cookies，只存在于HTTP头部，只能在服务器访问该Cookie；这样设计的目的是为了避免跨域脚本 (XSS) 攻击来窃取Cookie。\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Set-Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("test=bugszhou; expires=Thu, 31-Dec-37 23:55:55 GMT; HttpOnly")])]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("h4",{attrs:{id:"secure"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#secure"}},[e._v("#")]),e._v(" Secure")]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[e._v("// Secure代表该Cookie只能通过HTTPS协议来互相传递，一般用于传递具有高价值的信息。\n"),t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Set-Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("test=bugszhou; expires=Thu, 31-Dec-37 23:55:55 GMT; Secure; HttpOnly")])]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("h3",{attrs:{id:"cookie的生命周期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie的生命周期"}},[e._v("#")]),e._v(" Cookie的生命周期")]),e._v(" "),t("p",[e._v("Cookie 的生命周期可以通过两种方式定义：")]),e._v(" "),t("ul",[t("li",[e._v("会话期 Cookie 是最简单的 Cookie：浏览器关闭之后它会被自动删除，也就是说它仅在会话期内有效。会话期Cookie不需要指定过期时间（"),t("code",[e._v("Expires")]),e._v("）或者有效期（"),t("code",[e._v("Max-Age")]),e._v("）。需要注意的是，有些浏览器提供了会话恢复功能，这种情况下即使关闭了浏览器，会话期Cookie 也会被保留下来，就好像浏览器从来没有关闭一样，这会导致 Cookie 的生命周期无限期延长。")]),e._v(" "),t("li",[e._v("持久性 Cookie 的生命周期取决于过期时间（"),t("code",[e._v("Expires")]),e._v("）或有效期（"),t("code",[e._v("Max-Age")]),e._v("）指定的一段时间。")])]),e._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"/Users/cheng/Library/Application Support/typora-user-images/image-20210413103704011.png",alt:"image-20210413103704011"}}),e._v(" "),t("h2",{attrs:{id:"session"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#session"}},[e._v("#")]),e._v(" Session")]),e._v(" "),t("p",[e._v("与cookie对应的是session，session保存在服务器上。")]),e._v(" "),t("p",[e._v("因为HTTP协议是无状态的，所以session判断不了是否同一个用户，于是乎就有了sessionid，通过session的值来区分是哪一个用户。")]),e._v(" "),t("p",[e._v("Session Storage 中的Session ID")]),e._v(" "),t("p",[e._v("session 的运行依赖 session id，而 session id 是存在 cookie 中的，也就是说，如果浏览器禁用了 cookie ，同时 session 也会失效（但是可以通过其它方式实现，比如在 url 中传递 session_id）")]),e._v(" "),t("img",{staticStyle:{zoom:"67%"},attrs:{src:"/Users/cheng/Library/Application Support/typora-user-images/image-20210413112340036.png",alt:"image-20210413112340036"}}),e._v(" "),t("p",[e._v("从上图可以看出sessionId是一段加密字符串， 类似于uuid")]),e._v(" "),t("p",[t("strong",[e._v("2.cookie 和 session 的区别?")])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"web-storage-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#web-storage-api"}},[e._v("#")]),e._v(" Web Storage API")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API",target:"_blank",rel:"noopener noreferrer"}},[e._v("Web Storage"),t("OutboundLink")],1),e._v(" 包含如下两种机制：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("sessionStorage")]),e._v(" 为每一个给定的源（given origin）维持一个独立的存储区域，该存储区域在页面会话期间可用（即只要浏览器处于打开状态，包括页面重新加载和恢复）。")]),e._v(" "),t("li",[t("code",[e._v("localStorage")]),e._v(" 同样的功能，但是在浏览器关闭，然后重新打开后数据仍然存在。")])]),e._v(" "),t("h3",{attrs:{id:"localstorage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#localstorage"}},[e._v("#")]),e._v(" localStorage")]),e._v(" "),t("p",[t("code",[e._v("localStorage")]),e._v(" 类似 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/sessionStorage",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("sessionStorage")]),t("OutboundLink")],1),e._v("，但其区别在于：存储在 "),t("code",[e._v("localStorage")]),e._v(" 的数据可以长期保留；而当页面会话结束——也就是说，当页面被关闭时，存储在 "),t("code",[e._v("sessionStorage")]),e._v(" 的数据会被清除 。")]),e._v(" "),t("p",[e._v("另外，"),t("code",[e._v("localStorage")]),e._v(" 中的键值对总是以字符串的形式存储。 (需要注意, 和js对象相比, 键值对总是以字符串的形式存储意味着数值类型会自动转化为字符串类型).")]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"token"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#token"}},[e._v("#")]),e._v(" token")]),e._v(" "),t("p",[e._v("什么是 token")]),e._v(" "),t("h2",{attrs:{id:"cookie-localstorage-与-sessionstorage-的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie-localstorage-与-sessionstorage-的区别"}},[e._v("#")]),e._v(" Cookie, LocalStorage 与 SessionStorage 的区别")]),e._v(" "),t("p",[e._v("https://jerryzou.com/posts/cookie-and-web-storage/")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("特性")]),e._v(" "),t("th",[e._v("Cookie")]),e._v(" "),t("th",[e._v("localStorage")]),e._v(" "),t("th",[e._v("sessionStorage")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("数据的生命期")]),e._v(" "),t("td",[e._v("一般由服务器生成，可设置失效时间。如果在浏览器端生成 Cookie，默认是关闭浏览器后失效")]),e._v(" "),t("td",[e._v("除非被清除，否则永久保存")]),e._v(" "),t("td",[e._v("仅在当前会话下有效，关闭页面或浏览器后被清除")])]),e._v(" "),t("tr",[t("td",[e._v("存放数据大小")]),e._v(" "),t("td",[e._v("4K 左右")]),e._v(" "),t("td",[e._v("一般为 5MB")]),e._v(" "),t("td")]),e._v(" "),t("tr",[t("td",[e._v("与服务器端通信")]),e._v(" "),t("td",[e._v("每次都会携带在 HTTP 头中，如果使用 cookie 保存过多数据会带来性能问题")]),e._v(" "),t("td",[e._v("仅在客户端（即浏览器）中保存，不参与和服务器的通信")]),e._v(" "),t("td")]),e._v(" "),t("tr",[t("td",[e._v("易用性")]),e._v(" "),t("td",[e._v("需要程序员自己封装，源生的 Cookie 接口不友好")]),e._v(" "),t("td",[e._v("源生接口可以接受，亦可再次封装来对 Object 和 Array 有更好的支持")]),e._v(" "),t("td")])])]),e._v(" "),t("h4",{attrs:{id:"localstorage-和-sessionstorage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#localstorage-和-sessionstorage"}},[e._v("#")]),e._v(" localStorage 和 sessionStorage")]),e._v(" "),t("p",[t("a",{attrs:{href:"http://caibaojian.com/localstorage-sessionstorage.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("相关文章"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("html5 中的 "),t("a",{attrs:{href:"http://caibaojian.com/w3c/",target:"_blank",rel:"noopener noreferrer"}},[e._v("web"),t("OutboundLink")],1),e._v(" Storage 包括了两种存储方式：sessionStorage 和 localStorage。 sessionStorage 用于本地存储一个会话（session）中的数据，这些数据只有在同一个会话中的页面才能访问，会话结束后数据也随之销毁。localStorage 用于存储一个域名下的需要永久存在在本地的数据，这些数据可以被一直访问，直到这些数据被删除。因此 sessionStorage 和 localStorage 的主要区别在于他们存储数据的生命周期，sessionStorage 存储的数据的生命周期是一个会话，而 localStorage 存储的数据的生命周期是永久，直到被主动删除，否则数据永远不会过期的。")]),e._v(" "),t("h2",{attrs:{id:"cookie机制来存储和传递令牌-token"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie机制来存储和传递令牌-token"}},[e._v("#")]),e._v(" Cookie机制来存储和传递令牌（Token）")]),e._v(" "),t("p",[e._v("优化Token管理的一些方法包括：")]),e._v(" "),t("ol",[t("li",[t("p",[t("strong",[e._v("安全标志（Secure Flag）：")]),e._v(" 设置Cookie的"),t("code",[e._v("Secure")]),e._v("标志，将其限制为仅通过加密的HTTPS连接传输。这有助于确保Token在传输过程中的安全性。")]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Set-Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("token=your_token; Secure; HttpOnly;")])]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("HttpOnly标志：")]),e._v(" 设置Cookie的"),t("code",[e._v("HttpOnly")]),e._v("标志，防止通过JavaScript脚本访问Cookie。这有助于防止跨站脚本攻击（XSS）。")]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Set-Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("token=your_token; Secure; HttpOnly;")])]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("SameSite属性：")]),e._v(" 使用"),t("code",[e._v("SameSite")]),e._v("属性来限制Cookie的发送，以防止CSRF（跨站请求伪造）攻击。"),t("code",[e._v("SameSite")]),e._v("属性有三个值："),t("code",[e._v("Strict")]),e._v("、"),t("code",[e._v("Lax")]),e._v("、和"),t("code",[e._v("None")]),e._v("。")]),e._v(" "),t("div",{staticClass:"language-http line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-http"}},[t("code",[t("span",{pre:!0,attrs:{class:"token header"}},[t("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("Set-Cookie")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token header-value"}},[e._v("token=your_token; Secure; HttpOnly; SameSite=Lax;")])]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("Token过期时间：")]),e._v(" 设置Token的过期时间，以确保用户在长时间内离开后需要重新进行身份验证。过期时间应根据应用程序的需求进行合理的设置。")])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("刷新Token：")]),e._v(" 使用刷新令牌（Refresh Token）机制，当访问令牌过期时，可以使用刷新令牌来获取新的访问令牌，而不需要用户重新登录。")])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("Token存储方式：")]),e._v(" 考虑在Cookie中存储Token的标识符，而将实际的Token存储在服务器端或其他更安全的存储介质中。")])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("单一登录（Single Sign-On，SSO）：")]),e._v(" 如果应用程序使用多个服务，可以考虑使用单一登录系统，使用户在多个服务之间共享令牌，而无需在每个服务中都进行身份验证。")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);