(window.webpackJsonp=window.webpackJsonp||[]).push([[449],{739:function(s,a,t){"use strict";t.r(a);var e=t(8),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"linux使用ssh密钥登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux使用ssh密钥登录"}},[s._v("#")]),s._v(" Linux使用ssh密钥登录")]),s._v(" "),a("p",[s._v("首先在vscode下载remote-ssh相关插件")]),s._v(" "),a("h3",{attrs:{id:"参考链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[s._v("#")]),s._v(" 参考链接:")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://xirikm.net/2019/619-1",target:"_blank",rel:"noopener noreferrer"}},[s._v("VSCode 配置 Remote-SSH 远程开发"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"在服务器上安装公钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在服务器上安装公钥"}},[s._v("#")]),s._v(" 在服务器上安装公钥")]),s._v(" "),a("p",[s._v("键入以下命令，在服务器上安装公钥：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" .ssh\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" id_rsa.pub "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" authorized_keys\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"配置ssh密钥登陆"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置ssh密钥登陆"}},[s._v("#")]),s._v(" 配置SSH密钥登陆")]),s._v(" "),a("p",[s._v("用户目录下的 "),a("code",[s._v(".ssh")]),s._v(" 文件夹内的 id_rsa 和 id_rsa.pub 两个文件,分别对应为私钥和公钥。将 id_rsa.pub 文件中的内容复制到你远程主机用户目录下 .ssh 文件夹内名为 authorized_keys 的文件中即可。")]),s._v(" "),a("p",[s._v("或者将id_rsa.pub复制到.ssh目录下,然后执行")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" id_rsa.pub "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" authorized_keys\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"遇到的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#遇到的问题"}},[s._v("#")]),s._v(" 遇到的问题")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("用"),a("code",[s._v("ssh-keygen")]),s._v("生成密钥的时候,如果本地已经存在id_rsa,id_rsa.pub 文件,可以直接使用.")])]),s._v(" "),a("li",[a("p",[s._v("如果服务器不支持密钥登陆,则需要开启.参考链接:"),a("a",{attrs:{href:"https://hyjk2000.github.io/2012/03/16/how-to-set-up-ssh-keys/",target:"_blank",rel:"noopener noreferrer"}},[s._v("设置SSH通过密钥登陆"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/sshd_config\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#修改如下内容")]),s._v("\nRSAAuthentication "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\nPubkeyAuthentication "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("完成以上操作后,使用root用户可以正常登陆,但是用普通用户登陆仍然要输入密码")]),s._v(" "),a("p",[a("strong",[s._v("这里的原因是.ssh目录与authorized_keys文件的权限不能太大,像766这种肯定是无法登陆的.")])]),s._v(" "),a("p",[a("strong",[s._v("于是我对照root用户下的权限,改成了700,测试发现可以登陆了")])]),s._v(" "),a("p",[s._v("注意: .ssh目录权限改为700,authorized_keys 权限改为600")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("700")]),s._v(" ~/.ssh\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v(" ~/.ssh/authorized_keys\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"etc-ssh-sshd-config配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etc-ssh-sshd-config配置"}},[s._v("#")]),s._v(" /etc/ssh/sshd_config配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("PasswordAuthentication no\t#禁用密码登陆\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"authorized-keys文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#authorized-keys文件"}},[s._v("#")]),s._v(" authorized_keys文件")]),s._v(" "),a("p",[s._v("远程主机将用户的公钥，保存在登录后的用户主目录的$HOME/.ssh/authorized_keys文件中。公钥就是一段字符串，只要把它追加在authorized_keys文件的末尾就行了。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent",target:"_blank",rel:"noopener noreferrer"}},[s._v("Github密钥生成看这里！"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"rsa和ed25519"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rsa和ed25519"}},[s._v("#")]),s._v(" rsa和ed25519")]),s._v(" "),a("p",[s._v("ssh rsa 和ed25519都是ssh key的类型，具体可以看"),a("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1493298",target:"_blank",rel:"noopener noreferrer"}},[s._v("这篇文章"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("ed25519比rsa更先进安全，优先选择ed25519，其次rsa")])])}),[],!1,null,null,null);a.default=r.exports}}]);