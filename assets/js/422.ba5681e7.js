(window.webpackJsonp=window.webpackJsonp||[]).push([[422],{712:function(s,a,e){"use strict";e.r(a);var t=e(8),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"screen命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#screen命令"}},[s._v("#")]),s._v(" Screen命令")]),s._v(" "),a("p",[s._v("Linux中的Screen可用于将任务在后台运行")]),s._v(" "),a("h3",{attrs:{id:"参考连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考连接"}},[s._v("#")]),s._v(" 参考连接")]),s._v(" "),a("p",[s._v("https://www.css3er.com/p/199.html")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--help")]),s._v("\nUse: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-opts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("cmd "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n or: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("host.tty"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nOptions:\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-4")]),s._v("            Resolve hostnames only to IPv4 addresses.\n\t\t\t  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 仅将主机名解析为IPv4地址。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-6")]),s._v("            Resolve hostnames only to IPv6 addresses.\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v("            Force all capabilities into each window"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s termcap.\n-A -[r|R]     Adapt all windows to the new display width & height.\n-c file       Read configuration file instead of '")]),s._v(".screenrc"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.\n-d (-r)       Detach the elsewhere running screen (and reattach here).\n-dmS name     Start as daemon: Screen session in detached mode.\n-D (-r)       Detach and logout remote (and reattach here).\n-D -RR        Do whatever is needed to get a screen session.\n-e xy         Change command characters.\n-f            Flow control on, -fn = off, -fa = auto.\n-h lines      Set the size of the scrollback history buffer.\n-i            Interrupt output sooner when flow control is on.\n-l            Login mode on (update /var/run/utmp), -ln = off.\n-ls [match]   or\n-list         Do nothing, just list our SockDir [on possible matches].\n\t\t\t  # 不执行任何操作，仅在可能的匹配项中列出我们的SockDir。\n-L            Turn on output logging.\n-m            ignore $STY variable, do create a new screen session.\n-O            Choose optimal output rather than exact vt100 emulation.\n-p window     Preselect the named window if it exists.\n\t\t\t  # 预选命名窗口（如果存在）\n-q            Quiet startup. Exits with non-zero return code if unsuccessful.\n-Q            Commands will send the response to the stdout of the querying process.\n-r [session]  Reattach to a detached screen process.\n-R            Reattach if possible, otherwise start a new session.\n-s shell      Shell to execute rather than $SHELL.\n-S sockname   Name this session <pid>.sockname instead of <pid>.<tty>.<host>.\n-t title      Set title. (window'")]),s._v("s name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-T")]),s._v(" term       Use term as "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$TERM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" windows, rather than "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"screen"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-U")]),s._v("            Tell "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" to use UTF-8 encoding.\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v("            Print "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Screen version 4.01.00devel (GNU) 2-May-06"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-wipe")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("match"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Do nothing, just clean up SockDir "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("on possible matches"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v("            Attach to a not detached screen. "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Multi display mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(".\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v("            Execute "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("cmd"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" as a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the specified session.\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br")])]),a("h2",{attrs:{id:"screen的语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#screen的语法"}},[s._v("#")]),s._v(" screen的语法")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-AmRvx "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ls")]),s._v(" -wipe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-d "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("作业名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-h "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("行数"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-r "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("作业名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-s "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-S "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("作业名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-A")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将所有的视窗都调整为目前终端机的大小。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#<作业名称> 　将指定的screen作业离线。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#<行数> 　指定视窗的缓冲区行数。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#即使目前已在作业中的screen作业，仍强制建立新的screen作业。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#<作业名称> 　恢复离线的screen作业。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-R")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#先试图恢复离线的作业。若找不到离线的作业，即建立新的screen作业。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定建立新视窗时，所要执行的shell。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#<作业名称> 　指定screen作业的名称。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" 　"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示版本信息。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#恢复之前离线的screen作业。")]),s._v("\n\n-ls或--list  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示目前所有的screen作业。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-wipe")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#检查目前所有的screen作业，并删除已经无法使用的screen作业。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-hlep")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看screen命令的更多使用帮助")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("h3",{attrs:{id:"常用screen参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用screen参数"}},[s._v("#")]),s._v(" 常用screen参数")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" yourname     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#新建一个叫yourname的session")]),s._v("\nCtrl+a z\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将当前session放到后台执行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ls")]),s._v("             "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#列出当前所有的session")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" yourname     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#回到yourname这个session")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" yourname     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#远程detach某个session")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" yourname  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#结束当前session并回到yourname这个session")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("创建：screen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n\n查看有多少会话：screen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ls")]),s._v("\n\n恢复：screen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n\n如果不能恢复：先screen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n\n再screen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n\n删除 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### -X quit")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"dontstarvetogether-shell"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dontstarvetogether-shell"}},[s._v("#")]),s._v(" DontStarveTogether shell")]),s._v(" "),a("p",[s._v("新建服务")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-dmS")]),s._v(" master "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#新建master窗口")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("重启服务")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("screen_name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"master"')]),s._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmd")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./run_dedicated_servers.sh"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-dr")]),s._v(" master "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" quit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#screen -dr 将master离线，如果找不到master就建立新的")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建一个名叫 $screen_name 的session，但暂不进入，可用于系统启动脚本里")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-dmS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$screen_name")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#向screen发送$cmd命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$screen_name")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" stuff "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cmd")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-S")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$screen_name")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-X")]),s._v(" stuff "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("$'"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"shell脚本调用screen命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell脚本调用screen命令"}},[s._v("#")]),s._v(" shell脚本调用screen命令")]),s._v(" "),a("h4",{attrs:{id:"难点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#难点"}},[s._v("#")]),s._v(" 难点：")]),s._v(" "),a("p",[s._v("shell脚本生成screen后无法执行后面的命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-dmS")]),s._v(" master\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后续命令都无法执行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("经查https://www.cnblogs.com/date/p/10497571.html发现")]),s._v(" "),a("p",[s._v("可以通过后接"),a("code",[s._v("bash -c")]),s._v("命令来执行命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("screen")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-dmS")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ping www.baidu.com'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("其中 -dmS test 指 后台静默创建名称为 test 的会话，会话名比较重要。")]),s._v(" "),a("p",[s._v("bash -c 'ping www.baidu.com' 指 会话中 执行 ping www.baidu.com 命令")])])}),[],!1,null,null,null);a.default=n.exports}}]);